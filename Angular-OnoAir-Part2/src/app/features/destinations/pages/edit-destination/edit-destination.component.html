<div class="form-container" *ngIf="!isLoading; else loadingTemplate">
  <mat-card class="form-card">
    <h2 class="glitter-text">Edit Destination</h2>
    <form #editDestinationForm="ngForm" (ngSubmit)="saveDestination()">
      
      <!-- ID (Disabled) -->
      <div>
        <mat-form-field>
          <mat-label>ID</mat-label>
          <input matInput name="id" [(ngModel)]="destination.id" disabled />
        </mat-form-field>
      </div>

      <!-- Name Validation -->
      <div>
        <mat-form-field>
          <mat-label>Name</mat-label>
          <input matInput name="name" required [(ngModel)]="destination.name" #name="ngModel" pattern="^[a-zA-Z ]+$" />
        </mat-form-field>
        <mat-error *ngIf="name.invalid && name.touched">
          <span *ngIf="name.errors?.['required']">Name is required.</span>
          <span *ngIf="name.errors?.['pattern']">Name must contain only letters.</span>
        </mat-error>
      </div>

      <!-- Airport Name Validation -->
      <div>
        <mat-form-field>
          <mat-label>Airport Name</mat-label>
          <input matInput name="airportName" required [(ngModel)]="destination.airportName" #airportName="ngModel" pattern="^[a-zA-Z ]+$" />
        </mat-form-field>
        <mat-error *ngIf="airportName.invalid && airportName.touched">
          <span *ngIf="airportName.errors?.['required']">Airport Name is required.</span>
          <span *ngIf="airportName.errors?.['pattern']">Airport Name must contain only letters.</span>
        </mat-error>
      </div>

      <!-- Airport Website Validation -->
      <div>
        <mat-form-field>
          <mat-label>Airport Website</mat-label>
          <input matInput name="airportWebsite" required [(ngModel)]="destination.airportWebsite" #airportWebsite="ngModel" pattern="https?://.+" />
        </mat-form-field>
        <mat-error *ngIf="airportWebsite.invalid && airportWebsite.touched">
          <span *ngIf="airportWebsite.errors?.['required']">Airport Website is required.</span>
          <span *ngIf="airportWebsite.errors?.['pattern']">URL must start with http:// or https://</span>
        </mat-error>
      </div>

      <!-- Email Validation -->
      <div>
        <mat-form-field>
          <mat-label>Email</mat-label>
          <input matInput name="email" required [(ngModel)]="destination.email" #email="ngModel" type="email" />
        </mat-form-field>
        <mat-error *ngIf="email.invalid && email.touched">
          <span *ngIf="email.errors?.['required']">Email is required.</span>
          <span *ngIf="email.errors?.['email']">Invalid email format.</span>
        </mat-error>
      </div>

      <!-- Destination Code (Disabled) -->
      <div>
        <mat-form-field>
          <mat-label>Destination Code</mat-label>
          <input matInput name="code" required [(ngModel)]="destination.code" disabled />
        </mat-form-field>
      </div>

      <!-- Image URL Validation -->
      <div>
        <mat-form-field>
          <mat-label>Image URL</mat-label>
          <input matInput name="imageUrl" required [(ngModel)]="destination.imageUrl" #imageUrl="ngModel" pattern="https?://.+" />
        </mat-form-field>
        <mat-error *ngIf="imageUrl.invalid && imageUrl.touched">
          <span *ngIf="imageUrl.errors?.['required']">Image URL is required.</span>
          <span *ngIf="imageUrl.errors?.['pattern']">URL must start with http:// or https://</span>
        </mat-error>
      </div>

      <div class="button-container">
        <button mat-raised-button color="primary" type="submit" [disabled]="editDestinationForm.invalid">
          Save
        </button>
        <button mat-raised-button color="warn" type="button" (click)="cancelEdit()">
          Cancel
        </button>
      </div>
    </form>
  </mat-card>
</div>

<ng-template #loadingTemplate>
  <mat-card>
    <p>Loading destination details editor...</p>
  </mat-card>
</ng-template>
